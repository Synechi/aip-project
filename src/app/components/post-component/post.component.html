<div class="mainbody" *ngIf="errorMessage">
    <h2>{{errorMessage}}</h2>
</div>
<div class="mainBody">
    <!-- Code from npx-pagination documentation: https://www.npmjs.com/package/ngx-pagination#styling-->
    <div class="postComponent" *ngFor="let image of images | paginate: { itemsPerPage: 10, currentPage: p }">
        <div class="postHeader">
            <h4>user: {{image.username}}</h4>
            <button *ngIf="currentUser" mat-flat-button color="warn" (click)="openDialog()">
                <mat-icon>flag</mat-icon>
            </button>
        </div>
        <img src="{{image.imageUrl}}">

        <div class="postBtns">
            <mat-button-toggle-group>
                <mat-button-toggle>ğŸ‘</mat-button-toggle>
                <mat-button-toggle>ğŸ˜†</mat-button-toggle>
                <mat-button-toggle>ğŸ˜¥</mat-button-toggle>
                <mat-button-toggle>ğŸ˜®</mat-button-toggle>
                <mat-button-toggle>ğŸ˜ </mat-button-toggle>
            </mat-button-toggle-group>
 
            <button mat-flat-button color="primary" (click)="toggleResponses(images.indexOf(image))">Toggle Responses</button>
        </div>
        <div *ngIf="toggleResponsesBools[images.indexOf(image)]">
            <div *ngIf="currentUser">
                <hr>
                <button mat-flat-button color="primary" (click)="openCreateResponseDialog(image.imageUrl)">
                    Create Response
                </button>
            </div>
            <hr>
            <div>
                <h4>Responses</h4>
                <post-responses 
                    *ngFor="let item of image.children"
                    [childImage]="item"
                    [parentUrl]="image.imageUrl">
                </post-responses>
            </div>
        </div>
    </div>
    <!-- Code from npx-pagination documentation: https://www.npmjs.com/package/ngx-pagination#styling-->
    <div class="paginatorDiv">
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </div>

</div>


<router-outlet></router-outlet>
